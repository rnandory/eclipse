package com.newlecture.code.struct.exam;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;

public class App {

	public static void main(String[] args) {
		EXIT_LOOP:
		while (true) {
			// 화면 지우고
            clear();
            // intro출력
            int menu = inputMenu();            
            
            switch (menu) {
            case 2: // 성적추가 
            	clear();
            	regRecord();
            	changeView();
            	break;
            case 3: // 성적로드
            	clear();
            	loadRecord();
            	changeView(); // 화면전환용 임시프롬프트
            	break;
            case 4: // 성적저장
            	clear();
            	saveRecord();
            	changeView();
            	break;
            case 5: // 종료
            	clear();
            	exit();
            	break EXIT_LOOP;
            case 1: // 성적목록
            	// 페이지 정보
            	int page = 1;
            	int postPerPage = 6;
            	
            	page_menu:
            	while (true) {
            		clear();
            		printRecords();
            	}
            	break;
            default:
            	System.out.println("오류 : 1~5까지의 값만 입력할 수 있습니다.");
            	changeView();
            }//swich
		}//while
	}//main
	
	private static void printRecords() throws IOException {
		FileInputStream fis = new FileInputStream("res/data.csv");
        Scanner scan = new Scanner(fis);
        
     // 성적목록 제목 컬럼명 출력
        {
            System.out.printf("%d page\n", page);
            System.out.println("┌──────────────────────────────────────────────────┐");
            System.out.println("│                     성적 목록                    │");
            System.out.println("└──────────────────────────────────────────────────┘");

            // String[] caption = scan.nextLine().split(",");
            // System.out.printf("%-4s\t%-4s\t%-4s\t%-4s\n", caption[0], caption[1],
            // caption[2], caption[3]);

            // 컬럼명 한줄 버리기
            scan.nextLine();

            // 캡션 출력
            System.out.printf("%-4s\t%-4s\t%-4s\t%-4s\t%-4s\t%-4s\t%-4s\n", "이름", "국어", "영어", "수학",
                    "총점", "평균",
                    "학점");
        }
	}

	public static boolean isNumeric(String str) {
        try {
            Double.parseDouble(str);
            return true;
        } catch (NumberFormatException e) {
            return false;
        }
    }

    public static void clear() {
        try {
            String operatingSystem = System.getProperty("os.name");
            if (operatingSystem.contains("Windows")) {
                ProcessBuilder pb = new ProcessBuilder("cmd", "/c", "cls");
                Process startProcess = pb.inheritIO().start();
                startProcess.waitFor();
            } else {
                ProcessBuilder pb = new ProcessBuilder("clear");
                Process startProcess = pb.inheritIO().start();
                startProcess.waitFor();
            }
        } catch (Exception e) {
            System.out.println(e);
        }
    }
}
